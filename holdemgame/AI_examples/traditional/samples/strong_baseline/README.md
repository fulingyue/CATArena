# Strong Baseline AI

这是一个基于手牌强度、位置和底池赔率的智能德州扑克AI，相比简单的随机AI有显著的性能提升。

## 主要特性

### 1. 手牌强度评估
- **翻牌前评估**: 基于起手牌强度，包括对子、同花、高牌等
- **翻牌后评估**: 计算最佳5张牌组合，评估成牌强度
- **精确评分**: 0-1之间的连续评分系统

### 2. 位置感知
- **按钮位**: 1.2倍激进因子
- **后位**: 1.1倍激进因子  
- **中位**: 1.0倍激进因子
- **前位**: 0.9倍激进因子
- **盲注位**: 0.8倍激进因子

### 3. 底池赔率计算
- 根据底池大小和跟注成本计算赔率
- 好的底池赔率会增加激进因子
- 差的底池赔率会降低激进因子

### 4. 游戏阶段调整
- **翻牌前**: 更激进（1.1倍）
- **翻牌**: 标准激进度（1.0倍）
- **转牌**: 更保守（0.9倍）
- **河牌**: 最保守（0.8倍）

## 决策逻辑

### 超强牌（手牌强度 > 0.8）
- 优先加注，根据手牌强度决定加注大小
- 手牌强度 > 0.9时加注更大
- 否则跟注或过牌

### 强牌（手牌强度 > 0.6）
- 在位置优势时加注
- 否则跟注或过牌

### 中等牌（手牌强度 > 0.4）
- 根据底池赔率决定
- 好的底池赔率（>3:1）时跟注
- 否则过牌或弃牌

### 弱牌（手牌强度 ≤ 0.4）
- 只有在极好的底池赔率（>5:1）或位置优势时才跟注
- 否则弃牌

## 使用方法

### 1. 启动AI服务器
```bash
# 使用默认端口51012
./start_ai.sh

# 或指定端口
./start_ai.sh 51013
```

### 2. 手动启动
```bash
python3 holdem_ai.py --port 51012
```

### 3. 测试AI
```bash
# 确保AI服务器正在运行
python3 test_ai.py
```

## 技术实现

### 手牌评估算法
- 使用组合数学计算最佳5张牌
- 支持同花顺、四条、葫芦、同花、顺子、三条、两对、一对、高牌
- 翻牌前基于起手牌强度表进行评估

### 位置计算
- 基于庄家位置计算相对位置
- 考虑玩家数量动态调整位置因子

### 底池赔率
- 实时计算跟注成本与底池大小的比例
- 结合手牌强度做出最优决策

## 性能特点

相比简单随机AI，Strong Baseline AI具有以下优势：

1. **更智能的起手牌选择**: 基于手牌强度表，避免用弱牌进入底池
2. **位置感知**: 在有利位置更激进，在不利位置更保守
3. **底池赔率考虑**: 在好的赔率下跟注，在差的赔率下弃牌
4. **游戏阶段调整**: 随着游戏进行调整激进度
5. **成牌评估**: 准确评估翻牌后的牌力

## 依赖要求

- Python 3.7+
- Flask
- requests (用于测试)

## 接口格式

AI接受POST请求到`/action`端点，请求体包含游戏状态：

```json
{
  "valid_actions": [...],
  "players": {...},
  "current_player": "player1",
  "phase": "preflop",
  "pot": 30,
  "current_bet": 10,
  "community_cards": [],
  "dealer_index": 0
}
```

返回格式：
```json
{
  "action": "raise",
  "amount": 20
}
```

## 注意事项

1. 确保AI服务器在指定端口运行
2. 游戏状态必须包含所有必要信息
3. AI会根据手牌强度、位置和底池赔率做出决策
4. 建议在正式使用前进行充分测试

