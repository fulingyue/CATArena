# 五子棋AI开发指南

你是一个专业的AI开发者，需要为五子棋对战环境开发一个智能AI。请仔细阅读以下开发说明，并按照要求实现一个高性能的五子棋AI。

## 环境概述

这是一个基于HTTP的五子棋对战环境，具有以下特点：

### 游戏服务器
- **端口**: 20000 (默认)
- **棋盘大小**: 15x15
- **游戏规则**: 请通过阅读源码了解具体的游戏规则和机制

### 重要提示
**游戏规则说明**: 本环境包含特殊的游戏规则和机制，请务必仔细阅读 `server.py` 源码来了解：
- 游戏的核心机制
- 胜利条件
- 失败条件
- 特殊规则

## 开发要求

### 1. AI服务接口规范

你的AI必须实现以下HTTP接口：

#### 健康检查
```
GET /health
响应: {"status": "healthy", "ai_id": "你的AI_ID", "active_games": 0}
```

#### AI信息
```
GET /info
响应: {"ai_id": "你的AI_ID", "name": "AI名称", "version": "1.0", "description": "描述", "capabilities": ["能力列表"]}
```

#### 加入游戏
```
POST /join_game
请求: {"game_id": "游戏ID", "my_color": "black/white", "game_server_url": "http://localhost:20000"}
响应: {"status": "joined", "ai_id": "你的AI_ID", "game_id": "游戏ID", "my_color": "颜色"}
```

#### 获取落子
```
POST /get_move
请求: {"game_id": "游戏ID", "board": [[棋盘状态]], "current_player": "black/white"}
响应: {"move": [x, y], "ai_id": "你的AI_ID", "game_id": "游戏ID", "reasoning": "落子理由"}
```

#### 离开游戏
```
POST /leave_game
请求: {"game_id": "游戏ID"}
响应: {"status": "left", "ai_id": "你的AI_ID", "game_id": "游戏ID"}
```

### 2. 游戏规则理解

#### 棋盘表示
- `0`: 空位置
- `1`: 黑子
- `2`: 白子

#### 关键API接口
游戏服务器提供以下关键接口，请仔细研究其返回的数据结构：

```
GET http://localhost:20000/games/{game_id}/state
GET http://localhost:20000/games/{game_id}/forbidden_points
POST http://localhost:20000/games/{game_id}/move
```

**重要**: 通过分析这些接口的响应数据，理解游戏的核心机制和规则。

### 3. 开发步骤

#### 第一步：环境准备
1. 创建AI服务文件 `your_ai_server.py`
2. 实现Flask应用和基本接口
3. 确保能正确启动HTTP服务

#### 第二步：源码分析
1. **仔细阅读 `server.py`**: 理解游戏的核心逻辑和规则
2. **分析 `ai_http_server.py`**: 了解AI服务的基本实现
3. **研究API响应**: 通过测试理解各种数据结构

#### 第三步：核心算法实现
1. **规则适配**: 根据源码分析实现相应的游戏逻辑
2. **策略设计**: 基于游戏规则设计AI策略
3. **算法优化**: 实现高效的决策算法

#### 第四步：测试验证
1. 启动游戏服务器: `python server.py --port 20000`
2. 启动你的AI服务: 确保你的AI服务在指定端口上运行，并正确实现HTTP接口
3. 运行测试: `python test_magic_ai.py`



### 5. 关键开发提示

#### 源码分析重点
- 仔细阅读 `GomokuGame` 类的实现
- 优雅处理各种异常情况
- 确保AI在各种情况下都能正常工作
- 实现合理的超时和重试机制

### 6. 性能要求

- **响应时间**: 每次落子应在5秒内完成
- **内存使用**: 合理控制内存占用
- **错误处理**: 优雅处理各种异常情况
- **并发支持**: 支持同时参与多个游戏

### 7. 测试要求

你的AI必须通过以下测试：
1. 健康检查测试
2. 基本功能测试
3. 游戏规则适配测试
4. 对战测试

### 8. 提交要求

请提供：
1. 完整的AI服务代码
2. 启动说明
3. 算法说明（基于对源码的理解）
4. 测试结果
5. 性能分析

## 开发提示

1. **深入源码分析**: 仔细阅读 `server.py` 和 `ai_http_server.py` 了解具体实现
2. **理解游戏机制**: 通过源码分析理解游戏的核心规则和机制
3. **测试驱动开发**: 先实现基本功能，再逐步优化
4. **错误处理**: 确保AI在各种异常情况下都能正常工作
5. **性能优化**: 在保证正确性的前提下优化算法效率

## 评估标准

你的AI将根据以下标准进行评估：
1. **正确性**: 是否正确遵守游戏规则（基于源码理解）
2. **智能性**: AI的决策质量
3. **稳定性**: 在各种情况下的表现
4. **性能**: 响应速度和资源使用
5. **代码质量**: 代码的可读性和可维护性

## 重要提醒

**请务必仔细阅读源码**: 游戏的具体规则和机制都隐藏在 `server.py` 中，只有通过深入分析源码才能理解：
- 游戏的核心逻辑
- 胜利和失败的条件
- 特殊机制和规则
- 数据结构的设计

**不要依赖文档中的规则说明**: 文档中不会明确说明具体的游戏规则，你需要通过阅读源码来发现和理解这些规则。

请开始你的开发工作，并确保你的AI能够在这个环境中表现出色！ 